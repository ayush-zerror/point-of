{"version":3,"file":"index-DK22ncVJ.js","sources":["../../src/javascripts/cursor.js","../../src/javascripts/script.js"],"sourcesContent":["'use strict';\n\n// Mobile promo section\n\n// const promoPopup = document.getElementsByClassName('promo')[0];\n// const promoPopupClose = document.getElementsByClassName('promo-close')[0];\n\n// if (isMobile()) {\n//     setTimeout(() => {\n//         promoPopup.style.display = 'table';\n//     }, 20000);\n// }\n\n// promoPopupClose.addEventListener('click', e => {\n//     promoPopup.style.display = 'none';\n// });\n\n// const appleLink = document.getElementById('apple_link');\n// appleLink.addEventListener('click', e => {\n//     ga('send', 'event', 'link promo', 'app');\n//     window.open('https://apps.apple.com/us/app/fluid-simulation/id1443124993');\n// });\n\n// const googleLink = document.getElementById('google_link');\n// googleLink.addEventListener('click', e => {\n//     ga('send', 'event', 'link promo', 'app');\n//     window.open('https://play.google.com/store/apps/details?id=games.paveldogreat.fluidsimfree');\n// });\n\n// Simulation section\n\nconst canvas = document.getElementsByTagName('canvas')[0];\nresizeCanvas();\n\n\n\nlet config = {\n    SIM_RESOLUTION: 128,\n    DYE_RESOLUTION: 1024,\n    CAPTURE_RESOLUTION: 512,\n    DENSITY_DISSIPATION: 3,\n    VELOCITY_DISSIPATION: 0.25,\n    PRESSURE: 0.3,\n    PRESSURE_ITERATIONS: 20,\n    CURL: 20,\n    SPLAT_RADIUS: 0.8,\n    SPLAT_FORCE: 2500, // Reduced to soften motion\n    SHADING: true,\n    COLORFUL: true,\n    COLOR_UPDATE_SPEED: 8,\n    PAUSED: false,\n    BACK_COLOR: { r: 0, g:0, b:0 }, // Light gray background\n    TRANSPARENT: true,\n    BLOOM: true,\n    BLOOM_ITERATIONS: 6,\n    BLOOM_RESOLUTION: 256,\n    BLOOM_INTENSITY: 0.3, // Lowered for subtlety\n    BLOOM_THRESHOLD: 0.8,\n    BLOOM_SOFT_KNEE: 0.6,\n    SUNRAYS: true,\n    SUNRAYS_RESOLUTION: 196,\n    SUNRAYS_WEIGHT: 0.3 // Subtle sunrays effect\n};\n\n\nfunction pointerPrototype () {\n    this.id = -1;\n    this.texcoordX = 0;\n    this.texcoordY = 0;\n    this.prevTexcoordX = 0;\n    this.prevTexcoordY = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.down = false;\n    this.moved = false;\n    this.color = [30, 0, 300];\n}\n\nlet pointers = [];\nlet splatStack = [];\npointers.push(new pointerPrototype());\n\nconst { gl, ext } = getWebGLContext(canvas);\n\nif (isMobile()) {\n    config.DYE_RESOLUTION = 512;\n}\nif (!ext.supportLinearFiltering) {\n    config.DYE_RESOLUTION = 512;\n    config.SHADING = false;\n    config.BLOOM = false;\n    config.SUNRAYS = false;\n}\n\n// startGUI();\n\nfunction getWebGLContext (canvas) {\n    const params = { alpha: true, depth: false, stencil: false, antialias: false, preserveDrawingBuffer: false };\n\n    let gl = canvas.getContext('webgl2', params);\n    const isWebGL2 = !!gl;\n    if (!isWebGL2)\n        gl = canvas.getContext('webgl', params) || canvas.getContext('experimental-webgl', params);\n\n    let halfFloat;\n    let supportLinearFiltering;\n    if (isWebGL2) {\n        gl.getExtension('EXT_color_buffer_float');\n        supportLinearFiltering = gl.getExtension('OES_texture_float_linear');\n    } else {\n        halfFloat = gl.getExtension('OES_texture_half_float');\n        supportLinearFiltering = gl.getExtension('OES_texture_half_float_linear');\n    }\n\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n    const halfFloatTexType = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;\n    let formatRGBA;\n    let formatRG;\n    let formatR;\n\n    if (isWebGL2)\n    {\n        formatRGBA = getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, halfFloatTexType);\n        formatRG = getSupportedFormat(gl, gl.RG16F, gl.RG, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.R16F, gl.RED, halfFloatTexType);\n    }\n    else\n    {\n        formatRGBA = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatRG = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n    }\n\n    ga('send', 'event', isWebGL2 ? 'webgl2' : 'webgl', formatRGBA == null ? 'not supported' : 'supported');\n\n    return {\n        gl,\n        ext: {\n            formatRGBA,\n            formatRG,\n            formatR,\n            halfFloatTexType,\n            supportLinearFiltering\n        }\n    };\n}\n\nfunction getSupportedFormat (gl, internalFormat, format, type)\n{\n    if (!supportRenderTextureFormat(gl, internalFormat, format, type))\n    {\n        switch (internalFormat)\n        {\n            case gl.R16F:\n                return getSupportedFormat(gl, gl.RG16F, gl.RG, type);\n            case gl.RG16F:\n                return getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, type);\n            default:\n                return null;\n        }\n    }\n\n    return {\n        internalFormat,\n        format\n    }\n}\n\nfunction supportRenderTextureFormat (gl, internalFormat, format, type) {\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, 4, 4, 0, format, type, null);\n\n    let fbo = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n    let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    return status == gl.FRAMEBUFFER_COMPLETE;\n}\n\nfunction startGUI () {\n    var gui = new dat.GUI({ width: 300 });\n    gui.add(config, 'DYE_RESOLUTION', { 'high': 1024, 'medium': 512, 'low': 256, 'very low': 128 }).name('quality').onFinishChange(initFramebuffers);\n    gui.add(config, 'SIM_RESOLUTION', { '32': 32, '64': 64, '128': 128, '256': 256 }).name('sim resolution').onFinishChange(initFramebuffers);\n    gui.add(config, 'DENSITY_DISSIPATION', 0, 4.0).name('density diffusion');\n    gui.add(config, 'VELOCITY_DISSIPATION', 0, 4.0).name('velocity diffusion');\n    gui.add(config, 'PRESSURE', 0.0, 1.0).name('pressure');\n    gui.add(config, 'CURL', 0, 50).name('vorticity').step(1);\n    gui.add(config, 'SPLAT_RADIUS', 0.01, 1.0).name('splat radius');\n    gui.add(config, 'SHADING').name('shading').onFinishChange(updateKeywords);\n    gui.add(config, 'COLORFUL').name('colorful');\n    gui.add(config, 'PAUSED').name('paused').listen();\n\n    gui.add({ fun: () => {\n        splatStack.push(parseInt(Math.random() * 20) + 5);\n    } }, 'fun').name('Random splats');\n\n    let bloomFolder = gui.addFolder('Bloom');\n    bloomFolder.add(config, 'BLOOM').name('enabled').onFinishChange(updateKeywords);\n    bloomFolder.add(config, 'BLOOM_INTENSITY', 0.1, 2.0).name('intensity');\n    bloomFolder.add(config, 'BLOOM_THRESHOLD', 0.0, 1.0).name('threshold');\n\n    let sunraysFolder = gui.addFolder('Sunrays');\n    sunraysFolder.add(config, 'SUNRAYS').name('enabled').onFinishChange(updateKeywords);\n    sunraysFolder.add(config, 'SUNRAYS_WEIGHT', 0.3, 1.0).name('weight');\n\n    let captureFolder = gui.addFolder('Capture');\n    captureFolder.addColor(config, 'BACK_COLOR').name('background color');\n    captureFolder.add(config, 'TRANSPARENT').name('transparent');\n    captureFolder.add({ fun: captureScreenshot }, 'fun').name('take screenshot');\n\n    let github = gui.add({ fun : () => {\n        window.open('https://github.com/PavelDoGreat/WebGL-Fluid-Simulation');\n        ga('send', 'event', 'link button', 'github');\n    } }, 'fun').name('Github');\n    github.__li.className = 'cr function bigFont';\n    github.__li.style.borderLeft = '3px solid #8C8C8C';\n    let githubIcon = document.createElement('span');\n    github.domElement.parentElement.appendChild(githubIcon);\n    githubIcon.className = 'icon github';\n\n    let twitter = gui.add({ fun : () => {\n        ga('send', 'event', 'link button', 'twitter');\n        window.open('https://twitter.com/PavelDoGreat');\n    } }, 'fun').name('Twitter');\n    twitter.__li.className = 'cr function bigFont';\n    twitter.__li.style.borderLeft = '3px solid #8C8C8C';\n    let twitterIcon = document.createElement('span');\n    twitter.domElement.parentElement.appendChild(twitterIcon);\n    twitterIcon.className = 'icon twitter';\n\n    let discord = gui.add({ fun : () => {\n        ga('send', 'event', 'link button', 'discord');\n        window.open('https://discordapp.com/invite/CeqZDDE');\n    } }, 'fun').name('Discord');\n    discord.__li.className = 'cr function bigFont';\n    discord.__li.style.borderLeft = '3px solid #8C8C8C';\n    let discordIcon = document.createElement('span');\n    discord.domElement.parentElement.appendChild(discordIcon);\n    discordIcon.className = 'icon discord';\n\n    let app = gui.add({ fun : () => {\n        ga('send', 'event', 'link button', 'app');\n        window.open('http://onelink.to/5b58bn');\n    } }, 'fun').name('Check out mobile app');\n    app.__li.className = 'cr function appBigFont';\n    app.__li.style.borderLeft = '3px solid #00FF7F';\n    let appIcon = document.createElement('span');\n    app.domElement.parentElement.appendChild(appIcon);\n    appIcon.className = 'icon app';\n\n    if (isMobile())\n        gui.close();\n}\n\nfunction isMobile () {\n    return /Mobi|Android/i.test(navigator.userAgent);\n}\n\nfunction captureScreenshot () {\n    let res = getResolution(config.CAPTURE_RESOLUTION);\n    let target = createFBO(res.width, res.height, ext.formatRGBA.internalFormat, ext.formatRGBA.format, ext.halfFloatTexType, gl.NEAREST);\n    render(target);\n\n    let texture = framebufferToTexture(target);\n    texture = normalizeTexture(texture, target.width, target.height);\n\n    let captureCanvas = textureToCanvas(texture, target.width, target.height);\n    let datauri = captureCanvas.toDataURL();\n    downloadURI('fluid.png', datauri);\n    URL.revokeObjectURL(datauri);\n}\n\nfunction framebufferToTexture (target) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, target.fbo);\n    let length = target.width * target.height * 4;\n    let texture = new Float32Array(length);\n    gl.readPixels(0, 0, target.width, target.height, gl.RGBA, gl.FLOAT, texture);\n    return texture;\n}\n\nfunction normalizeTexture (texture, width, height) {\n    let result = new Uint8Array(texture.length);\n    let id = 0;\n    for (let i = height - 1; i >= 0; i--) {\n        for (let j = 0; j < width; j++) {\n            let nid = i * width * 4 + j * 4;\n            result[nid + 0] = clamp01(texture[id + 0]) * 255;\n            result[nid + 1] = clamp01(texture[id + 1]) * 255;\n            result[nid + 2] = clamp01(texture[id + 2]) * 255;\n            result[nid + 3] = clamp01(texture[id + 3]) * 255;\n            id += 4;\n        }\n    }\n    return result;\n}\n\nfunction clamp01 (input) {\n    return Math.min(Math.max(input, 0), 1);\n}\n\nfunction textureToCanvas (texture, width, height) {\n    let captureCanvas = document.createElement('canvas');\n    let ctx = captureCanvas.getContext('2d');\n    captureCanvas.width = width;\n    captureCanvas.height = height;\n\n    let imageData = ctx.createImageData(width, height);\n    imageData.data.set(texture);\n    ctx.putImageData(imageData, 0, 0);\n\n    return captureCanvas;\n}\n\nfunction downloadURI (filename, uri) {\n    let link = document.createElement('a');\n    link.download = filename;\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n\nclass Material {\n    constructor (vertexShader, fragmentShaderSource) {\n        this.vertexShader = vertexShader;\n        this.fragmentShaderSource = fragmentShaderSource;\n        this.programs = [];\n        this.activeProgram = null;\n        this.uniforms = [];\n    }\n\n    setKeywords (keywords) {\n        let hash = 0;\n        for (let i = 0; i < keywords.length; i++)\n            hash += hashCode(keywords[i]);\n\n        let program = this.programs[hash];\n        if (program == null)\n        {\n            let fragmentShader = compileShader(gl.FRAGMENT_SHADER, this.fragmentShaderSource, keywords);\n            program = createProgram(this.vertexShader, fragmentShader);\n            this.programs[hash] = program;\n        }\n\n        if (program == this.activeProgram) return;\n\n        this.uniforms = getUniforms(program);\n        this.activeProgram = program;\n    }\n\n    bind () {\n        gl.useProgram(this.activeProgram);\n    }\n}\n\nclass Program {\n    constructor (vertexShader, fragmentShader) {\n        this.uniforms = {};\n        this.program = createProgram(vertexShader, fragmentShader);\n        this.uniforms = getUniforms(this.program);\n    }\n\n    bind () {\n        gl.useProgram(this.program);\n    }\n}\n\nfunction createProgram (vertexShader, fragmentShader) {\n    let program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n        console.trace(gl.getProgramInfoLog(program));\n\n    return program;\n}\n\nfunction getUniforms (program) {\n    let uniforms = [];\n    let uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let i = 0; i < uniformCount; i++) {\n        let uniformName = gl.getActiveUniform(program, i).name;\n        uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n    }\n    return uniforms;\n}\n\nfunction compileShader (type, source, keywords) {\n    source = addKeywords(source, keywords);\n\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\n        console.trace(gl.getShaderInfoLog(shader));\n\n    return shader;\n};\n\nfunction addKeywords (source, keywords) {\n    if (keywords == null) return source;\n    let keywordsString = '';\n    keywords.forEach(keyword => {\n        keywordsString += '#define ' + keyword + '\\n';\n    });\n    return keywordsString + source;\n}\n\nconst baseVertexShader = compileShader(gl.VERTEX_SHADER, `\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        vL = vUv - vec2(texelSize.x, 0.0);\n        vR = vUv + vec2(texelSize.x, 0.0);\n        vT = vUv + vec2(0.0, texelSize.y);\n        vB = vUv - vec2(0.0, texelSize.y);\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n`);\n\nconst blurVertexShader = compileShader(gl.VERTEX_SHADER, `\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        float offset = 1.33333333;\n        vL = vUv - texelSize * offset;\n        vR = vUv + texelSize * offset;\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n`);\n\nconst blurShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = texture2D(uTexture, vUv) * 0.29411764;\n        sum += texture2D(uTexture, vL) * 0.35294117;\n        sum += texture2D(uTexture, vR) * 0.35294117;\n        gl_FragColor = sum;\n    }\n`);\n\nconst copyShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        gl_FragColor = texture2D(uTexture, vUv);\n    }\n`);\n\nconst clearShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float value;\n\n    void main () {\n        gl_FragColor = value * texture2D(uTexture, vUv);\n    }\n`);\n\nconst colorShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n\n    uniform vec4 color;\n\n    void main () {\n        gl_FragColor = color;\n    }\n`);\n\nconst checkerboardShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float aspectRatio;\n\n    #define SCALE 25.0\n\n    void main () {\n        vec2 uv = floor(vUv * SCALE * vec2(aspectRatio, 1.0));\n        float v = mod(uv.x + uv.y, 2.0);\n        v = v * 0.1 + 0.8;\n        gl_FragColor = vec4(vec3(v), 1.0);\n    }\n`);\n\nconst displayShaderSource = `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform sampler2D uBloom;\n    uniform sampler2D uSunrays;\n    uniform sampler2D uDithering;\n    uniform vec2 ditherScale;\n    uniform vec2 texelSize;\n\n    vec3 linearToGamma (vec3 color) {\n        color = max(color, vec3(0));\n        return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n    }\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n\n    #ifdef SHADING\n        vec3 lc = texture2D(uTexture, vL).rgb;\n        vec3 rc = texture2D(uTexture, vR).rgb;\n        vec3 tc = texture2D(uTexture, vT).rgb;\n        vec3 bc = texture2D(uTexture, vB).rgb;\n\n        float dx = length(rc) - length(lc);\n        float dy = length(tc) - length(bc);\n\n        vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n        vec3 l = vec3(0.0, 0.0, 1.0);\n\n        float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n        c *= diffuse;\n    #endif\n\n    #ifdef BLOOM\n        vec3 bloom = texture2D(uBloom, vUv).rgb;\n    #endif\n\n    #ifdef SUNRAYS\n        float sunrays = texture2D(uSunrays, vUv).r;\n        c *= sunrays;\n    #ifdef BLOOM\n        bloom *= sunrays;\n    #endif\n    #endif\n\n    #ifdef BLOOM\n        float noise = texture2D(uDithering, vUv * ditherScale).r;\n        noise = noise * 2.0 - 1.0;\n        bloom += noise / 255.0;\n        bloom = linearToGamma(bloom);\n        c += bloom;\n    #endif\n\n        float a = max(c.r, max(c.g, c.b));\n        gl_FragColor = vec4(c, a);\n    }\n`;\n\nconst bloomPrefilterShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform vec3 curve;\n    uniform float threshold;\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n        float br = max(c.r, max(c.g, c.b));\n        float rq = clamp(br - curve.x, 0.0, curve.y);\n        rq = curve.z * rq * rq;\n        c *= max(rq, br - threshold) / max(br, 0.0001);\n        gl_FragColor = vec4(c, 0.0);\n    }\n`);\n\nconst bloomBlurShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum;\n    }\n`);\n\nconst bloomFinalShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform float intensity;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum * intensity;\n    }\n`);\n\nconst sunraysMaskShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 c = texture2D(uTexture, vUv);\n        float br = max(c.r, max(c.g, c.b));\n        c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);\n        gl_FragColor = c;\n    }\n`);\n\nconst sunraysShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float weight;\n\n    #define ITERATIONS 16\n\n    void main () {\n        float Density = 0.3;\n        float Decay = 0.95;\n        float Exposure = 0.7;\n\n        vec2 coord = vUv;\n        vec2 dir = vUv - 0.5;\n\n        dir *= 1.0 / float(ITERATIONS) * Density;\n        float illuminationDecay = 1.0;\n\n        float color = texture2D(uTexture, vUv).a;\n\n        for (int i = 0; i < ITERATIONS; i++)\n        {\n            coord -= dir;\n            float col = texture2D(uTexture, coord).a;\n            color += col * illuminationDecay * weight;\n            illuminationDecay *= Decay;\n        }\n\n        gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);\n    }\n`);\n\nconst splatShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTarget;\n    uniform float aspectRatio;\n    uniform vec3 color;\n    uniform vec2 point;\n    uniform float radius;\n\n    void main () {\n        vec2 p = vUv - point.xy;\n        p.x *= aspectRatio;\n        vec3 splat = exp(-dot(p, p) / radius) * color;\n        vec3 base = texture2D(uTarget, vUv).xyz;\n        gl_FragColor = vec4(base + splat, 1.0);\n    }\n`);\n\nconst advectionShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform vec2 dyeTexelSize;\n    uniform float dt;\n    uniform float dissipation;\n\n    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n        vec2 st = uv / tsize - 0.5;\n\n        vec2 iuv = floor(st);\n        vec2 fuv = fract(st);\n\n        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    }\n\n    void main () {\n    #ifdef MANUAL_FILTERING\n        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n        vec4 result = bilerp(uSource, coord, dyeTexelSize);\n    #else\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n        vec4 result = texture2D(uSource, coord);\n    #endif\n        float decay = 1.0 + dissipation * dt;\n        gl_FragColor = result / decay;\n    }`,\n    ext.supportLinearFiltering ? null : ['MANUAL_FILTERING']\n);\n\nconst divergenceShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).x;\n        float R = texture2D(uVelocity, vR).x;\n        float T = texture2D(uVelocity, vT).y;\n        float B = texture2D(uVelocity, vB).y;\n\n        vec2 C = texture2D(uVelocity, vUv).xy;\n        if (vL.x < 0.0) { L = -C.x; }\n        if (vR.x > 1.0) { R = -C.x; }\n        if (vT.y > 1.0) { T = -C.y; }\n        if (vB.y < 0.0) { B = -C.y; }\n\n        float div = 0.5 * (R - L + T - B);\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n    }\n`);\n\nconst curlShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).y;\n        float R = texture2D(uVelocity, vR).y;\n        float T = texture2D(uVelocity, vT).x;\n        float B = texture2D(uVelocity, vB).x;\n        float vorticity = R - L - T + B;\n        gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n    }\n`);\n\nconst vorticityShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uCurl;\n    uniform float curl;\n    uniform float dt;\n\n    void main () {\n        float L = texture2D(uCurl, vL).x;\n        float R = texture2D(uCurl, vR).x;\n        float T = texture2D(uCurl, vT).x;\n        float B = texture2D(uCurl, vB).x;\n        float C = texture2D(uCurl, vUv).x;\n\n        vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n        force /= length(force) + 0.0001;\n        force *= curl * C;\n        force.y *= -1.0;\n\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity += force * dt;\n        velocity = min(max(velocity, -1000.0), 1000.0);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n`);\n\nconst pressureShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uDivergence;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        float C = texture2D(uPressure, vUv).x;\n        float divergence = texture2D(uDivergence, vUv).x;\n        float pressure = (L + R + B + T - divergence) * 0.25;\n        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n    }\n`);\n\nconst gradientSubtractShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity.xy -= vec2(R - L, T - B);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n`);\n\nconst blit = (() => {\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(0);\n\n    return (target, clear = false) => {\n        if (target == null)\n        {\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n        else\n        {\n            gl.viewport(0, 0, target.width, target.height);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, target.fbo);\n        }\n        if (clear)\n        {\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n        // CHECK_FRAMEBUFFER_STATUS();\n        gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n    }\n})();\n\nfunction CHECK_FRAMEBUFFER_STATUS () {\n    let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    if (status != gl.FRAMEBUFFER_COMPLETE)\n        console.trace(\"Framebuffer error: \" + status);\n}\n\nlet dye;\nlet velocity;\nlet divergence;\nlet curl;\nlet pressure;\nlet bloom;\nlet bloomFramebuffers = [];\nlet sunrays;\nlet sunraysTemp;\n\nlet ditheringTexture = createTextureAsync('LDR_LLL1_0.png');\n\nconst blurProgram            = new Program(blurVertexShader, blurShader);\nconst copyProgram            = new Program(baseVertexShader, copyShader);\nconst clearProgram           = new Program(baseVertexShader, clearShader);\nconst colorProgram           = new Program(baseVertexShader, colorShader);\nconst checkerboardProgram    = new Program(baseVertexShader, checkerboardShader);\nconst bloomPrefilterProgram  = new Program(baseVertexShader, bloomPrefilterShader);\nconst bloomBlurProgram       = new Program(baseVertexShader, bloomBlurShader);\nconst bloomFinalProgram      = new Program(baseVertexShader, bloomFinalShader);\nconst sunraysMaskProgram     = new Program(baseVertexShader, sunraysMaskShader);\nconst sunraysProgram         = new Program(baseVertexShader, sunraysShader);\nconst splatProgram           = new Program(baseVertexShader, splatShader);\nconst advectionProgram       = new Program(baseVertexShader, advectionShader);\nconst divergenceProgram      = new Program(baseVertexShader, divergenceShader);\nconst curlProgram            = new Program(baseVertexShader, curlShader);\nconst vorticityProgram       = new Program(baseVertexShader, vorticityShader);\nconst pressureProgram        = new Program(baseVertexShader, pressureShader);\nconst gradienSubtractProgram = new Program(baseVertexShader, gradientSubtractShader);\n\nconst displayMaterial = new Material(baseVertexShader, displayShaderSource);\n\nfunction initFramebuffers () {\n    let simRes = getResolution(config.SIM_RESOLUTION);\n    let dyeRes = getResolution(config.DYE_RESOLUTION);\n\n    const texType = ext.halfFloatTexType;\n    const rgba    = ext.formatRGBA;\n    const rg      = ext.formatRG;\n    const r       = ext.formatR;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n\n    gl.disable(gl.BLEND);\n\n    if (dye == null)\n        dye = createDoubleFBO(dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\n    else\n        dye = resizeDoubleFBO(dye, dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\n\n    if (velocity == null)\n        velocity = createDoubleFBO(simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\n    else\n        velocity = resizeDoubleFBO(velocity, simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\n\n    divergence = createFBO      (simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n    curl       = createFBO      (simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n    pressure   = createDoubleFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n\n    initBloomFramebuffers();\n    initSunraysFramebuffers();\n}\n\nfunction initBloomFramebuffers () {\n    let res = getResolution(config.BLOOM_RESOLUTION);\n\n    const texType = ext.halfFloatTexType;\n    const rgba = ext.formatRGBA;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n\n    bloom = createFBO(res.width, res.height, rgba.internalFormat, rgba.format, texType, filtering);\n\n    bloomFramebuffers.length = 0;\n    for (let i = 0; i < config.BLOOM_ITERATIONS; i++)\n    {\n        let width = res.width >> (i + 1);\n        let height = res.height >> (i + 1);\n\n        if (width < 2 || height < 2) break;\n\n        let fbo = createFBO(width, height, rgba.internalFormat, rgba.format, texType, filtering);\n        bloomFramebuffers.push(fbo);\n    }\n}\n\nfunction initSunraysFramebuffers () {\n    let res = getResolution(config.SUNRAYS_RESOLUTION);\n\n    const texType = ext.halfFloatTexType;\n    const r = ext.formatR;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n\n    sunrays     = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\n    sunraysTemp = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\n}\n\nfunction createFBO (w, h, internalFormat, format, type, param) {\n    gl.activeTexture(gl.TEXTURE0);\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, w, h, 0, format, type, null);\n\n    let fbo = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    gl.viewport(0, 0, w, h);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    let texelSizeX = 1.0 / w;\n    let texelSizeY = 1.0 / h;\n\n    return {\n        texture,\n        fbo,\n        width: w,\n        height: h,\n        texelSizeX,\n        texelSizeY,\n        attach (id) {\n            gl.activeTexture(gl.TEXTURE0 + id);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            return id;\n        }\n    };\n}\n\nfunction createDoubleFBO (w, h, internalFormat, format, type, param) {\n    let fbo1 = createFBO(w, h, internalFormat, format, type, param);\n    let fbo2 = createFBO(w, h, internalFormat, format, type, param);\n\n    return {\n        width: w,\n        height: h,\n        texelSizeX: fbo1.texelSizeX,\n        texelSizeY: fbo1.texelSizeY,\n        get read () {\n            return fbo1;\n        },\n        set read (value) {\n            fbo1 = value;\n        },\n        get write () {\n            return fbo2;\n        },\n        set write (value) {\n            fbo2 = value;\n        },\n        swap () {\n            let temp = fbo1;\n            fbo1 = fbo2;\n            fbo2 = temp;\n        }\n    }\n}\n\nfunction resizeFBO (target, w, h, internalFormat, format, type, param) {\n    let newFBO = createFBO(w, h, internalFormat, format, type, param);\n    copyProgram.bind();\n    gl.uniform1i(copyProgram.uniforms.uTexture, target.attach(0));\n    blit(newFBO);\n    return newFBO;\n}\n\nfunction resizeDoubleFBO (target, w, h, internalFormat, format, type, param) {\n    if (target.width == w && target.height == h)\n        return target;\n    target.read = resizeFBO(target.read, w, h, internalFormat, format, type, param);\n    target.write = createFBO(w, h, internalFormat, format, type, param);\n    target.width = w;\n    target.height = h;\n    target.texelSizeX = 1.0 / w;\n    target.texelSizeY = 1.0 / h;\n    return target;\n}\n\nfunction createTextureAsync (url) {\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, new Uint8Array([255, 255, 255]));\n\n    let obj = {\n        texture,\n        width: 1,\n        height: 1,\n        attach (id) {\n            gl.activeTexture(gl.TEXTURE0 + id);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            return id;\n        }\n    };\n\n    let image = new Image();\n    image.onload = () => {\n        obj.width = image.width;\n        obj.height = image.height;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\n    };\n    image.src = url;\n\n    return obj;\n}\n\nfunction updateKeywords () {\n    let displayKeywords = [];\n    if (config.SHADING) displayKeywords.push(\"SHADING\");\n    if (config.BLOOM) displayKeywords.push(\"BLOOM\");\n    if (config.SUNRAYS) displayKeywords.push(\"SUNRAYS\");\n    displayMaterial.setKeywords(displayKeywords);\n}\n\nupdateKeywords();\ninitFramebuffers();\n// multipleSplats(parseInt(Math.random() * 20) + 5);\n\nlet lastUpdateTime = Date.now();\nlet colorUpdateTimer = 0.0;\nupdate();  \n\nfunction update () {\n    const dt = calcDeltaTime();\n    if (resizeCanvas())\n        initFramebuffers();\n    updateColors(dt);\n    applyInputs();\n    if (!config.PAUSED)\n        step(dt);\n    render(null);\n    requestAnimationFrame(update);\n}\n\nfunction calcDeltaTime () {\n    let now = Date.now();\n    let dt = (now - lastUpdateTime) / 1000;\n    dt = Math.min(dt, 0.016666);\n    lastUpdateTime = now;\n    return dt;\n}\n\nfunction resizeCanvas () {\n    let width = scaleByPixelRatio(canvas.clientWidth);\n    let height = scaleByPixelRatio(canvas.clientHeight);\n    if (canvas.width != width || canvas.height != height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n    }\n    return false;\n}\n\nfunction updateColors (dt) {\n    if (!config.COLORFUL) return;\n\n    colorUpdateTimer += dt * config.COLOR_UPDATE_SPEED;\n    if (colorUpdateTimer >= 1) {\n        colorUpdateTimer = wrap(colorUpdateTimer, 0, 1);\n        pointers.forEach(p => {\n            p.color = generateColor();\n        });\n    }\n}\n\nfunction applyInputs () {\n    if (splatStack.length > 0)\n        multipleSplats(splatStack.pop());\n\n    pointers.forEach(p => {\n        if (p.moved) {\n            p.moved = false;\n            splatPointer(p);\n        }\n    });\n}\n\nfunction step (dt) {\n    gl.disable(gl.BLEND);\n\n    curlProgram.bind();\n    gl.uniform2f(curlProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.read.attach(0));\n    blit(curl);\n\n    vorticityProgram.bind();\n    gl.uniform2f(vorticityProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(vorticityProgram.uniforms.uVelocity, velocity.read.attach(0));\n    gl.uniform1i(vorticityProgram.uniforms.uCurl, curl.attach(1));\n    gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);\n    gl.uniform1f(vorticityProgram.uniforms.dt, dt);\n    blit(velocity.write);\n    velocity.swap();\n\n    divergenceProgram.bind();\n    gl.uniform2f(divergenceProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(divergenceProgram.uniforms.uVelocity, velocity.read.attach(0));\n    blit(divergence);\n\n    clearProgram.bind();\n    gl.uniform1i(clearProgram.uniforms.uTexture, pressure.read.attach(0));\n    gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE);\n    blit(pressure.write);\n    pressure.swap();\n\n    pressureProgram.bind();\n    gl.uniform2f(pressureProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence.attach(0));\n    for (let i = 0; i < config.PRESSURE_ITERATIONS; i++) {\n        gl.uniform1i(pressureProgram.uniforms.uPressure, pressure.read.attach(1));\n        blit(pressure.write);\n        pressure.swap();\n    }\n\n    gradienSubtractProgram.bind();\n    gl.uniform2f(gradienSubtractProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(gradienSubtractProgram.uniforms.uPressure, pressure.read.attach(0));\n    gl.uniform1i(gradienSubtractProgram.uniforms.uVelocity, velocity.read.attach(1));\n    blit(velocity.write);\n    velocity.swap();\n\n    advectionProgram.bind();\n    gl.uniform2f(advectionProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    if (!ext.supportLinearFiltering)\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, velocity.texelSizeX, velocity.texelSizeY);\n    let velocityId = velocity.read.attach(0);\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocityId);\n    gl.uniform1i(advectionProgram.uniforms.uSource, velocityId);\n    gl.uniform1f(advectionProgram.uniforms.dt, dt);\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION);\n    blit(velocity.write);\n    velocity.swap();\n\n    if (!ext.supportLinearFiltering)\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, dye.texelSizeX, dye.texelSizeY);\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.read.attach(0));\n    gl.uniform1i(advectionProgram.uniforms.uSource, dye.read.attach(1));\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION);\n    blit(dye.write);\n    dye.swap();\n}\n\nfunction render (target) {\n    if (config.BLOOM)\n        applyBloom(dye.read, bloom);\n    if (config.SUNRAYS) {\n        applySunrays(dye.read, dye.write, sunrays);\n        blur(sunrays, sunraysTemp, 1);\n    }\n\n    if (target == null || !config.TRANSPARENT) {\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n    }\n    else {\n        gl.disable(gl.BLEND);\n    }\n\n    if (!config.TRANSPARENT)\n        drawColor(target, normalizeColor(config.BACK_COLOR));\n    // if (target == null && config.TRANSPARENT)\n        // drawCheckerboard(target);\n    drawDisplay(target);\n}\n\nfunction drawColor (target, color) {\n    colorProgram.bind();\n    gl.uniform4f(colorProgram.uniforms.color, color.r, color.g, color.b, 1);\n    blit(target);\n}\n\nfunction drawCheckerboard (target) {\n    checkerboardProgram.bind();\n    gl.uniform1f(checkerboardProgram.uniforms.aspectRatio, canvas.width / canvas.height);\n    blit(target);\n}\n\nfunction drawDisplay (target) {\n    let width = target == null ? gl.drawingBufferWidth : target.width;\n    let height = target == null ? gl.drawingBufferHeight : target.height;\n\n    displayMaterial.bind();\n    if (config.SHADING)\n        gl.uniform2f(displayMaterial.uniforms.texelSize, 1.0 / width, 1.0 / height);\n    gl.uniform1i(displayMaterial.uniforms.uTexture, dye.read.attach(0));\n    if (config.BLOOM) {\n        gl.uniform1i(displayMaterial.uniforms.uBloom, bloom.attach(1));\n        gl.uniform1i(displayMaterial.uniforms.uDithering, ditheringTexture.attach(2));\n        let scale = getTextureScale(ditheringTexture, width, height);\n        gl.uniform2f(displayMaterial.uniforms.ditherScale, scale.x, scale.y);\n    }\n    if (config.SUNRAYS)\n        gl.uniform1i(displayMaterial.uniforms.uSunrays, sunrays.attach(3));\n    blit(target);\n}\n\nfunction applyBloom (source, destination) {\n    if (bloomFramebuffers.length < 2)\n        return;\n\n    let last = destination;\n\n    gl.disable(gl.BLEND);\n    bloomPrefilterProgram.bind();\n    let knee = config.BLOOM_THRESHOLD * config.BLOOM_SOFT_KNEE + 0.0001;\n    let curve0 = config.BLOOM_THRESHOLD - knee;\n    let curve1 = knee * 2;\n    let curve2 = 0.25 / knee;\n    gl.uniform3f(bloomPrefilterProgram.uniforms.curve, curve0, curve1, curve2);\n    gl.uniform1f(bloomPrefilterProgram.uniforms.threshold, config.BLOOM_THRESHOLD);\n    gl.uniform1i(bloomPrefilterProgram.uniforms.uTexture, source.attach(0));\n    blit(last);\n\n    bloomBlurProgram.bind();\n    for (let i = 0; i < bloomFramebuffers.length; i++) {\n        let dest = bloomFramebuffers[i];\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\n        blit(dest);\n        last = dest;\n    }\n\n    gl.blendFunc(gl.ONE, gl.ONE);\n    gl.enable(gl.BLEND);\n\n    for (let i = bloomFramebuffers.length - 2; i >= 0; i--) {\n        let baseTex = bloomFramebuffers[i];\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\n        gl.viewport(0, 0, baseTex.width, baseTex.height);\n        blit(baseTex);\n        last = baseTex;\n    }\n\n    gl.disable(gl.BLEND);\n    bloomFinalProgram.bind();\n    gl.uniform2f(bloomFinalProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n    gl.uniform1i(bloomFinalProgram.uniforms.uTexture, last.attach(0));\n    gl.uniform1f(bloomFinalProgram.uniforms.intensity, config.BLOOM_INTENSITY);\n    blit(destination);\n}\n\nfunction applySunrays (source, mask, destination) {\n    gl.disable(gl.BLEND);\n    sunraysMaskProgram.bind();\n    gl.uniform1i(sunraysMaskProgram.uniforms.uTexture, source.attach(0));\n    blit(mask);\n\n    sunraysProgram.bind();\n    gl.uniform1f(sunraysProgram.uniforms.weight, config.SUNRAYS_WEIGHT);\n    gl.uniform1i(sunraysProgram.uniforms.uTexture, mask.attach(0));\n    blit(destination);\n}\n\nfunction blur (target, temp, iterations) {\n    blurProgram.bind();\n    for (let i = 0; i < iterations; i++) {\n        gl.uniform2f(blurProgram.uniforms.texelSize, target.texelSizeX, 0.0);\n        gl.uniform1i(blurProgram.uniforms.uTexture, target.attach(0));\n        blit(temp);\n\n        gl.uniform2f(blurProgram.uniforms.texelSize, 0.0, target.texelSizeY);\n        gl.uniform1i(blurProgram.uniforms.uTexture, temp.attach(0));\n        blit(target);\n    }\n}\n\nfunction splatPointer (pointer) {\n    let dx = pointer.deltaX * config.SPLAT_FORCE;\n    let dy = pointer.deltaY * config.SPLAT_FORCE;\n    splat(pointer.texcoordX, pointer.texcoordY, dx, dy, pointer.color);\n}\n\nfunction multipleSplats (amount) {\n    for (let i = 0; i < amount; i++) {\n        const color = generateColor();\n        color.r *= 10.0;\n        color.g *= 10.0;\n        color.b *= 10.0;\n        const x = Math.random();\n        const y = Math.random();\n        const dx = 1000 * (Math.random() - 0.5);\n        const dy = 1000 * (Math.random() - 0.5);\n        splat(x, y, dx, dy, color);\n    }\n}\n\nfunction splat (x, y, dx, dy, color) {\n    splatProgram.bind();\n    gl.uniform1i(splatProgram.uniforms.uTarget, velocity.read.attach(0));\n    gl.uniform1f(splatProgram.uniforms.aspectRatio, canvas.width / canvas.height);\n    gl.uniform2f(splatProgram.uniforms.point, x, y);\n    gl.uniform3f(splatProgram.uniforms.color, dx, dy, 0.0);\n    gl.uniform1f(splatProgram.uniforms.radius, correctRadius(config.SPLAT_RADIUS / 100.0));\n    blit(velocity.write);\n    velocity.swap();\n\n    gl.uniform1i(splatProgram.uniforms.uTarget, dye.read.attach(0));\n    gl.uniform3f(splatProgram.uniforms.color, color.r, color.g, color.b);\n    blit(dye.write);\n    dye.swap();\n}\n\nfunction correctRadius (radius) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio > 1)\n        radius *= aspectRatio;\n    return radius;\n}\n\ndocument.addEventListener('mousemove', e => {\n    console.log(\"hey\");\n\n    const rect = canvas.getBoundingClientRect();\n    const posX = scaleByPixelRatio(e.clientX - rect.left);\n    const posY = scaleByPixelRatio(e.clientY - rect.top);\n\n    let pointer = pointers.find(p => p.id === -1);\n    if (!pointer) {\n        pointer = new pointerPrototype();\n        pointers.push(pointer);\n    }\n\n    updatePointerMoveData(pointer, posX, posY);\n});\n\n\ndocument.addEventListener('touchstart', e => {\n    e.preventDefault();\n\n    const touches = e.targetTouches;\n    const rect = canvas.getBoundingClientRect(); // <- get canvas position\n\n    while (touches.length >= pointers.length)\n        pointers.push(new pointerPrototype());\n\n    for (let i = 0; i < touches.length; i++) {\n        let posX = scaleByPixelRatio(touches[i].clientX - rect.left);\n        let posY = scaleByPixelRatio(touches[i].clientY - rect.top);\n        updatePointerDownData(pointers[i + 1], touches[i].identifier, posX, posY);\n    }\n}, { passive: false }); // passive: false is needed for e.preventDefault to work\n\n\ndocument.addEventListener('touchmove', e => {\n    e.preventDefault(); // still needed to prevent scrolling\n\n    const touches = e.targetTouches;\n    const rect = canvas.getBoundingClientRect(); // canvas position in viewport\n\n    for (let i = 0; i < touches.length; i++) {\n        let pointer = pointers[i + 1];\n        if (!pointer.down) continue;\n\n        let posX = scaleByPixelRatio(touches[i].clientX - rect.left);\n        let posY = scaleByPixelRatio(touches[i].clientY - rect.top);\n        updatePointerMoveData(pointer, posX, posY);\n    }\n}, { passive: false });\n\n\nwindow.addEventListener('touchend', e => {\n    const touches = e.changedTouches;\n    for (let i = 0; i < touches.length; i++)\n    {\n        let pointer = pointers.find(p => p.id == touches[i].identifier);\n        if (pointer == null) continue;\n        updatePointerUpData(pointer);\n    }\n});\n\nwindow.addEventListener('keydown', e => {\n    if (e.code === 'KeyP')\n        config.PAUSED = !config.PAUSED;\n    if (e.key === ' ')\n        splatStack.push(parseInt(Math.random() * 20) + 5);\n});\n\nfunction updatePointerDownData (pointer, id, posX, posY) {\n    pointer.id = id;\n    pointer.down = true;\n    pointer.moved = false;\n    pointer.texcoordX = posX / canvas.width;\n    pointer.texcoordY = 1.0 - posY / canvas.height;\n    pointer.prevTexcoordX = pointer.texcoordX;\n    pointer.prevTexcoordY = pointer.texcoordY;\n    pointer.deltaX = 0;\n    pointer.deltaY = 0;\n    pointer.color = generateColor();\n}\n\nfunction updatePointerMoveData (pointer, posX, posY) {\n    pointer.prevTexcoordX = pointer.texcoordX;\n    pointer.prevTexcoordY = pointer.texcoordY;\n    pointer.texcoordX = posX / canvas.width;\n    pointer.texcoordY = 1.0 - posY / canvas.height;\n    pointer.deltaX = correctDeltaX(pointer.texcoordX - pointer.prevTexcoordX);\n    pointer.deltaY = correctDeltaY(pointer.texcoordY - pointer.prevTexcoordY);\n    pointer.moved = Math.abs(pointer.deltaX) > 0 || Math.abs(pointer.deltaY) > 0;\n}\n\nfunction updatePointerUpData (pointer) {\n    pointer.down = false;\n}\n\nfunction correctDeltaX (delta) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio < 1) delta *= aspectRatio;\n    return delta;\n}\n\nfunction correctDeltaY (delta) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio > 1) delta /= aspectRatio;\n    return delta;\n}\n\nfunction generateColor () {\n    let c = HSVtoRGB(Math.random(), 1.0, 1.0);\n    c.r *= 0.15;\n    c.g *= 0.15;\n    c.b *= 0.15;\n    return c;\n}\n\nfunction HSVtoRGB (h, s, v) {\n    let r, g, b, i, f, p, q, t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n        case 0: r = v, g = t, b = p; break;\n        case 1: r = q, g = v, b = p; break;\n        case 2: r = p, g = v, b = t; break;\n        case 3: r = p, g = q, b = v; break;\n        case 4: r = t, g = p, b = v; break;\n        case 5: r = v, g = p, b = q; break;\n    }\n\n    return {\n        r,\n        g,\n        b\n    };\n}\n\nfunction normalizeColor (input) {\n    let output = {\n        r: input.r / 255,\n        g: input.g / 255,\n        b: input.b / 255\n    };\n    return output;\n}\n\nfunction wrap (value, min, max) {\n    let range = max - min;\n    if (range == 0) return min;\n    return (value - min) % range + min;\n}\n\nfunction getResolution (resolution) {\n    let aspectRatio = gl.drawingBufferWidth / gl.drawingBufferHeight;\n    if (aspectRatio < 1)\n        aspectRatio = 1.0 / aspectRatio;\n\n    let min = Math.round(resolution);\n    let max = Math.round(resolution * aspectRatio);\n\n    if (gl.drawingBufferWidth > gl.drawingBufferHeight)\n        return { width: max, height: min };\n    else\n        return { width: min, height: max };\n}\n\nfunction getTextureScale (texture, width, height) {\n    return {\n        x: width / texture.width,\n        y: height / texture.height\n    };\n}\n\nfunction scaleByPixelRatio (input) {\n    let pixelRatio = window.devicePixelRatio || 1;\n    return Math.floor(input * pixelRatio);\n}\n\nfunction hashCode (s) {\n    if (s.length == 0) return 0;\n    let hash = 0;\n    for (let i = 0; i < s.length; i++) {\n        hash = (hash << 5) - hash + s.charCodeAt(i);\n        hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n};","var swiper = new Swiper(\".mySwiper\", {\r\n  slidesPerView: 1.2,\r\n  spaceBetween: 10,\r\n  loop: true, // Enable infinite loop\r\n  freeMode: true, // Allow free dragging\r\n  centeredSlides: false, // Don't center the slides\r\n  freeModeMomentum: true, // Enable smooth momentum\r\n  freeModeMomentumRatio: 0.5, // Control the momentum speed (lower = slower, smoother)\r\n  freeModeMomentumBounce: false, // Prevent bounce effect\r\n  speed: 600, // Adjust slide transition speed\r\n});\r\n\r\ngsap.registerPlugin(TextPlugin);\r\n\r\nconst headerData = [\r\n  \"creativity? \",\r\n  \"design innovation?\",\r\n  \"circular design?\",\r\n  \"storytelling?\",\r\n  \"brand loyalty?\",\r\n  \"human-centered design?\",\r\n  \"creative disruption?\",\r\n  \"emotional design?\",\r\n  \"design thinking?\",\r\n  \"design ethics?\",\r\n  \"design for social impact?\",\r\n  \"beauty in functional design?\",\r\n  \"AI as a creative partner?\",\r\n  \"emotion in brand design?\"\r\n];\r\n\r\nconst changingHeader = document.querySelector(\".thirdh\");\r\nlet index = 0;\r\n\r\n// Function to change header text with a typewriter effect\r\nfunction changeHeader() {\r\n  gsap.fromTo(changingHeader, \r\n    { text: \"\" }, // Start with empty string\r\n    { \r\n      duration: 1.5,\r\n      text: headerData[index],\r\n      ease: \"none\",\r\n      onComplete: () => {\r\n        setTimeout(() => {\r\n          index = (index === headerData.length - 1) ? 0 : index + 1;\r\n          changeHeader(); // Recursive call to cycle texts\r\n        }, 2000); // Wait before typing next string\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nfunction loader() {\r\n  document.addEventListener('DOMContentLoaded', function () {\r\n\r\n    document.querySelectorAll(\"#title-hero h1\").forEach(function (h) {\r\n      let clutter = \"\";\r\n      h.textContent.split(\"\").forEach(function (l) {\r\n        if (l === \" \") {\r\n          clutter += `<span>&nbsp;</span>`; // Use &nbsp; for non-breaking space\r\n        } else {\r\n          clutter += `<span>${l}</span>`;\r\n        }\r\n      });\r\n      h.innerHTML = clutter;\r\n    });\r\n    \r\n\r\n\r\n\r\n    var loader = gsap.timeline()\r\n\r\n    loader\r\n      .to(\"#curtain1\", {\r\n        clipPath: \" polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)\",\r\n        duration: .8,\r\n        delay: .4,\r\n        ease: \"power2.in\",\r\n      }, \"a\")\r\n\r\n      .to(\"#curtain2\", {\r\n        clipPath: \"polygon(0 0, 100% 0, 100% 100%, 0 100%)\",\r\n        duration: .8,\r\n        delay: .3,\r\n        ease: \"power2.in\",\r\n      }, \"a\")\r\n      .to(\".firsth span\", {\r\n        y: \"-100%\",\r\n        stagger: {\r\n          amount: .2,\r\n        },\r\n        duration: .6,\r\n        delay: .8,\r\n        onComplete: function () {\r\n          gsap.set(\".firsth span\", { y: \"100%\" })\r\n        }\r\n      }, \"a\")\r\n      .to(\".secondh span\", {\r\n        y: \"-100%\",\r\n        stagger: {\r\n          amount: .2,\r\n        },\r\n        duration: .6,\r\n        delay: .8,\r\n      }, \"a\")\r\n      .to(\"#curtain2\", {\r\n        clipPath: \" polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)\",\r\n        duration: .8,\r\n        ease: \"power2.in\",\r\n      }, \"b\")\r\n\r\n      .to(\".secondh span\", {\r\n        y: \"-200%\",\r\n        stagger: {\r\n          amount: .2,\r\n        },\r\n        duration: .6,\r\n        delay: .2,\r\n        onComplete: function () {\r\n          gsap.set(\".secondh span\", { y: \"0%\" })\r\n        }\r\n      }, \"b\")\r\n      .to(\".thirdh span\", {\r\n        y: \"-100%\",\r\n        stagger: {\r\n          amount: .2,\r\n        },\r\n        duration: .6,\r\n        delay: .2\r\n      }, \"b\")\r\n      .to(\"#page1 h1\", {\r\n        duration: 1,\r\n        color: \"var(--secondary)\"\r\n      }, \"c\")\r\n      .to(\"#page1 h1 span\", {\r\n        duration: 1,\r\n        color: \"var(--secondary)\"\r\n      }, \"c\")\r\n      .to(\".toph\", {\r\n        left: \"50%\",\r\n        transform: \"translate(-50%,0%)\",\r\n        duration: 1\r\n      }, \"c\")\r\n      .to(\"#title-hero\", {\r\n        left: \"50%\",\r\n        transform: \"translate(-50%,0%)\",\r\n        duration: .9\r\n      }, \"c\")\r\n      .to(\"#navbar\", {\r\n        top: \"0%\",\r\n        duration: .6,\r\n        opacity: 1\r\n      }, \"c\")\r\n      .to(\"#page1-over\", {\r\n        duration: .6,\r\n        opacity: 1,\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%,-50%)\",\r\n        onComplete: () => {\r\n          gsap.set(\".thirdh\",{top:0})\r\n          // Once the first animation is complete, start the text-changing animation\r\n          changeHeader();\r\n        }\r\n      })\r\n\r\n\r\n    // window.addEventListener(\"mousemove\", function (e) {\r\n    //   gsap.to(\"#page1-over\", {\r\n    //     top: window.innerHeight / 2 - (e.clientY - window.innerHeight / 2) * 0.3,\r\n    //     left: window.innerWidth / 2 - (e.clientX - window.innerWidth / 2) * 0.3,\r\n    //     duration: 1.2, // Smooth slow effect\r\n    //     ease: \"power2.out\",\r\n    //   });\r\n    // });\r\n\r\n  })\r\n\r\n\r\n\r\n}\r\nloader()\r\n\r\n\r\n\r\nconst cursor = document.querySelector(\"#cursor\")\r\nwindow.addEventListener(\"mousemove\", function (e) {\r\n  gsap.to(cursor, {\r\n    top: e.clientY,\r\n    left: e.clientX,\r\n  })\r\n  gsap.to(\"#small-cursor\", {\r\n    top: e.clientY,\r\n    left: e.clientX,\r\n    duration: 0,\r\n  })\r\n  gsap.to(\"#playCur\", {\r\n    top: e.clientY,\r\n    left: e.clientX,\r\n    transform: \"translate(-50%,-50%)\",\r\n    duration: 0\r\n  })\r\n})\r\ndocument.querySelectorAll(\".cursor-scale\").forEach(function (elem) {\r\n  elem.addEventListener(\"mouseenter\", function (e) {\r\n    gsap.to(cursor, {\r\n      width: \"2.5vw\",\r\n      height: \"2.5vw\",\r\n    })\r\n  })\r\n})\r\ndocument.querySelectorAll(\".cursor-scale\").forEach(function (elem) {\r\n  elem.addEventListener(\"mouseleave\", function (e) {\r\n    gsap.to(cursor, {\r\n      width: \"1.2vw\",\r\n      height: \"1.2vw\",\r\n    })\r\n  })\r\n})\r\n\r\ndocument.querySelector(\"#page6\").addEventListener(\"mouseenter\", function (e) {\r\n  gsap.to(cursor, {\r\n    width: \"4vw\",\r\n    height: \"4vw\",\r\n    backgroundColor: \"white\",\r\n  })\r\n  cursor.innerHTML = \"Drag\"\r\n})\r\ndocument.querySelector(\"#page6\").addEventListener(\"mouseleave\", function (e) {\r\n  gsap.to(cursor, {\r\n    width: \"1.5vw\",\r\n    height: \"1.5vw\",\r\n    backgroundColor: \"transparent\",\r\n  })\r\n  cursor.innerHTML = \"\"\r\n})\r\n\r\nvar muted = true\r\ndocument.querySelectorAll(\"#page6 .video-container video\").forEach(function (vid) {\r\n  vid.addEventListener(\"mouseenter\", function (e) {\r\n    gsap.to(\"#playCur\", {\r\n      opacity: 1,\r\n      duration: .2\r\n    })\r\n    cursor.innerHTML = \"\"\r\n    if (muted) {\r\n      document.querySelector(\"#playCur\").classList.add(\"ri-play-fill\")\r\n      document.querySelector(\"#playCur\").classList.remove(\"ri-pause-fill\")\r\n    }\r\n    else {\r\n      document.querySelector(\"#playCur\").classList.add(\"ri-pause-fill\")\r\n      document.querySelector(\"#playCur\").classList.remove(\"ri-play-fill\")\r\n    }\r\n  })\r\n})\r\ndocument.querySelectorAll(\"#page6 .video-container video\").forEach(function (vid) {\r\n  vid.addEventListener(\"mouseleave\", function (e) {\r\n    gsap.to(\"#playCur\", {\r\n      opacity: 0,\r\n      duration: .2\r\n    })\r\n    cursor.innerHTML = \"Drag\"\r\n  })\r\n})\r\n\r\n\r\ndocument.querySelectorAll(\"#page6 .video-container video\").forEach(function (vid) {\r\n  vid.addEventListener(\"click\", function (e) {\r\n    if (muted) {\r\n      vid.muted = false\r\n      muted = false\r\n    }\r\n    else {\r\n      vid.muted = true\r\n      muted = true\r\n    }\r\n  })\r\n})\r\n\r\n// function page1Animation() {\r\n\r\n//   const words = document.querySelectorAll(\".word-style\");\r\n\r\n//   let index = 0;\r\n//   setInterval(function () {\r\n//     gsap.to(words[index], {\r\n//       top: \"-100%\",\r\n//       duration: 0.8,\r\n//       onComplete: function () {\r\n//         gsap.set(this._targets[0], { top: \"100%\" });\r\n//       }\r\n//     });\r\n\r\n//     // Increment index before checking if it's the last element\r\n//     index = index === words.length - 1 ? 0 : index + 1;\r\n\r\n//     gsap.to(words[index], {\r\n//       top: \"0%\",\r\n//       duration: 0.8,\r\n//     });\r\n//   }, 3000);\r\n\r\n\r\n//   const tl1 = gsap.timeline({\r\n//     scrollTrigger: {\r\n//       trigger: \"#page1\",\r\n//       scroller: \"body\",\r\n//       start: \"top 0%\",\r\n//       end: \"top -100%\",\r\n//       scrub: 1,\r\n//       pin: true,\r\n//       // pinSpacing: false,\r\n//     }\r\n//   });\r\n\r\n//   tl1\r\n//     .to(\"#page1 h1\", {\r\n//       transform: \"rotateY(4deg) rotateX(2deg) scale(15) translateX(-10%)\", // Simplified transform\r\n//       duration: 1.2,\r\n//       ease: \"power3.out\", // Less taxing easing function\r\n//     }, \"a\")\r\n//     .to(\"#page1 h4\", {\r\n//       transform: \"scale(1.8) rotateY(8deg) rotateX(2deg) translateX(-10%)\", // Simplified transform\r\n//       opacity: 1,\r\n//       duration: 1.2,\r\n//       ease: \"power3.out\",\r\n//     }, \"a\")\r\n//     .to(\"#hero-video\", {\r\n//       top: \"0%\",\r\n//       // delay: -.5\r\n//     });\r\n\r\n\r\n// }\r\n// page1Animation()\r\n\r\n\r\nfunction page2Animation() {\r\n\r\n  var clutter = \"\"\r\n  document.querySelector(\"#page2-text\").textContent.split(\" \").forEach((w) => {\r\n    clutter += `<span> ${w}</span>`\r\n  })\r\n\r\n  document.querySelector(\"#page2-text\").innerHTML = clutter\r\n\r\n  var tl2 = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page2\",\r\n      scroller: \"body\",\r\n      start: \"top 10%\",\r\n      end: \"top 0%\",\r\n      scrub: 1,\r\n      // markers: true\r\n    }\r\n  })\r\n\r\n  tl2\r\n    .to(\"#circle2\", {\r\n      opacity: 1,\r\n      duration: .8\r\n    },\"a\")\r\n    .to(\"#navbar\", {\r\n      opacity: 0,\r\n      pointerEvent: \"none\",\r\n      duration: .2\r\n    }, \"a\")\r\n    .to(\"#navbar-black\", {\r\n      opacity: 1,\r\n      pointerEvent: \"all\",\r\n      duration: .2\r\n    }, \"a\")\r\n\r\n\r\n  var tl22 = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page2\",\r\n      scroller: \"body\",\r\n      start: \"top 0%\",\r\n      end: \"top -140%\",\r\n      scrub: 1,\r\n      pin: true,\r\n      anticipatePin: 1, // Helps smooth out pin transitions\r\n\r\n    }\r\n  })\r\n  tl22\r\n    .to(document.querySelectorAll(\"#page2-text span\"), {\r\n      opacity: 1,\r\n      stagger: 0.2,\r\n    }, \"a\")\r\n    .to(\"#circle2\", {\r\n      width: \"1.5vw\",\r\n      height: \"1.5vw\",\r\n      // filter: \"blur(0px)\",\r\n      duration: 8,\r\n      autoRound: false\r\n    }, \"a\")\r\n    .to(\"#navbar-black\", {\r\n      opacity: 0,\r\n      pointerEvent: \"none\",\r\n      duration: .2\r\n    }, \"b\")\r\n    .to(\"#navbar\", {\r\n      opacity: 1,\r\n      pointerEvent: \"all\",\r\n      duration: .2\r\n    }, \"b\")\r\n\r\n\r\n\r\n}\r\npage2Animation()\r\n\r\n\r\nfunction pointMidAnimation() {\r\n\r\n  const page3 = document.querySelector(\"#page3\");\r\n  const h2 = document.querySelector(\"#h1height\");\r\n  const h22 = document.querySelector(\"#h1height2\");\r\n\r\n  let positionFromPage3Top = h2.getBoundingClientRect().top - page3.getBoundingClientRect().top + h2.offsetHeight / 2\r\n  let diff = (h22.getBoundingClientRect().top - h2.getBoundingClientRect().top) - .2\r\n\r\n  var tlc = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page3\",\r\n      scroller: \"body\",\r\n      start: \"top 100%\",\r\n      end: \"top 5%\",\r\n      scrub: 1,\r\n      // markers: true\r\n    }\r\n  })\r\n\r\n  tlc\r\n    .to(\"#circle2\", {\r\n      top: positionFromPage3Top,\r\n      transform: \"translate(-50%,-50%) scale(1)\",\r\n      duration: 3,\r\n    })\r\n\r\n\r\n\r\n  var tl = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page3\",\r\n      scroller: \"body\",\r\n      start: \"top top\",\r\n      end: \"+=3000\",\r\n      scrub: true,\r\n      pin: true,\r\n    }\r\n  });\r\n\r\n  tl\r\n\r\n    .to(\"#right-content > h2\", {\r\n      x: 300,\r\n      filter: \"blur(4px)\",\r\n      opacity: 0,\r\n      duration: .8,\r\n      stagger: {\r\n        amount: 0.2,\r\n      },\r\n      delay: .2\r\n    })\r\n    .to(\"#right-content-top > h2\", {\r\n      transform: \"translateX(0%)\",\r\n      opacity: 1,\r\n      duration: .8,\r\n      stagger: {\r\n        amount: 0.2,\r\n      }\r\n    }, \"bk\")\r\n    .to(\"#ser2,#ser3,#ser4,#ser5,#ser6\", {\r\n      filter: \"blur(4px)\",\r\n      opacity: .4,\r\n      duration: .5,\r\n    }, \"a\")\r\n    .to(\"#para1\", {\r\n      opacity: .5,\r\n      duration: .4\r\n    }, \"a\")\r\n\r\n    .to(\"#circle2\", {\r\n      top: positionFromPage3Top + diff * 1,\r\n      transform: \"translate(-50%,-50%) scale(1)\",\r\n      duration: .8,\r\n      delay: 1\r\n    }, \"b\")\r\n    .to(\"#ser1,#ser3,#ser4,#ser5,#ser6\", {\r\n      filter: \"blur(4px)\",\r\n      opacity: .4,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"b\")\r\n    .to(\"#ser2\", {\r\n      filter: \"blur(0px)\",\r\n      opacity: 1,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"b\")\r\n    .to(\"#para1\", {\r\n      opacity: 0,\r\n      duration: .4,\r\n      delay: 1\r\n    }, \"b\")\r\n    .to(\"#para2\", {\r\n      opacity: .5,\r\n      duration: .4,\r\n      delay: 1.4\r\n    }, \"b\")\r\n\r\n    .to(\"#circle2\", {\r\n      top: positionFromPage3Top + diff * 2,\r\n      transform: \"translate(-50%,-50%) scale(1)\",\r\n      duration: .8,\r\n      delay: 1\r\n    }, \"c\")\r\n    .to(\"#ser1,#ser2,#ser4,#ser5,#ser6\", {\r\n      filter: \"blur(4px)\",\r\n      opacity: .4,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"c\")\r\n    .to(\"#ser3\", {\r\n      filter: \"blur(0px)\",\r\n      opacity: 1,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"c\")\r\n    .to(\"#para2\", {\r\n      opacity: 0,\r\n      duration: .4,\r\n      delay: 1\r\n    }, \"c\")\r\n    .to(\"#para3\", {\r\n      opacity: .5,\r\n      duration: .4,\r\n      delay: 1.4\r\n    }, \"c\")\r\n\r\n    .to(\"#circle2\", {\r\n      top: positionFromPage3Top + diff * 3,\r\n      transform: \"translate(-50%,-50%) scale(1)\",\r\n      duration: .8,\r\n      delay: 1\r\n    }, \"d\")\r\n    .to(\"#ser1,#ser2,#ser3,#ser5,#ser6\", {\r\n      filter: \"blur(4px)\",\r\n      opacity: .4,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"d\")\r\n    .to(\"#ser4\", {\r\n      filter: \"blur(0px)\",\r\n      opacity: 1,\r\n      duration: .5,\r\n      delay: 1\r\n    }, \"d\")\r\n    .to(\"#para3\", {\r\n      opacity: 0,\r\n      duration: .4,\r\n      delay: 1\r\n    }, \"d\")\r\n    .to(\"#para4\", {\r\n      opacity: .5,\r\n      duration: .4,\r\n      delay: 1.4\r\n    }, \"d\")\r\n\r\n    // .to(\"#circle2\", {\r\n    //   top: positionFromPage3Top + diff * 4,\r\n    //   transform: \"translate(-50%,-50%) scale(1)\",\r\n    //   duration: .8,\r\n    //   delay: 1\r\n    // }, \"e\")\r\n    // .to(\"#ser1,#ser2,#ser3,#ser4,#ser6\", {\r\n    //   filter: \"blur(4px)\",\r\n    //   opacity: .4,\r\n    //   duration: .5,\r\n    //   delay: 1\r\n    // }, \"e\")\r\n    // .to(\"#ser5\", {\r\n    //   filter: \"blur(0px)\",\r\n    //   opacity: 1,\r\n    //   duration: .5,\r\n    //   delay: 1\r\n    // }, \"e\")\r\n    // .to(\"#para4\", {\r\n    //   opacity: 0,\r\n    //   duration: .4,\r\n    //   delay: 1\r\n    // }, \"e\")\r\n    // .to(\"#para5\", {\r\n    //   opacity: .5,\r\n    //   duration: .4,\r\n    //   delay: 1.4\r\n    // }, \"e\")\r\n\r\n    // .to(\"#circle2\", {\r\n    //   top: positionFromPage3Top + diff * 5,\r\n    //   transform: \"translate(-50%,-50%) scale(1)\",\r\n    //   duration: .8,\r\n    //   delay: 1\r\n    // }, \"f\")\r\n    // .to(\"#ser1,#ser2,#ser3,#ser4,#ser5\", {\r\n    //   filter: \"blur(4px)\",\r\n    //   opacity: .4,\r\n    //   duration: .5,\r\n    //   delay: 1\r\n    // }, \"f\")\r\n    // .to(\"#ser6\", {\r\n    //   filter: \"blur(0px)\",\r\n    //   opacity: 1,\r\n    //   duration: .5,\r\n    //   delay: 1\r\n    // }, \"f\")\r\n    // .to(\"#para5\", {\r\n    //   opacity: 0,\r\n    //   duration: .4,\r\n    //   delay: 1\r\n    // }, \"f\")\r\n    // .to(\"#para6\", {\r\n    //   opacity: .5,\r\n    //   duration: .4,\r\n    //   delay: 1.4,\r\n    // }, \"f\")\r\n    // .to(\"#para6\", {\r\n    //   opacity: .5,\r\n    //   delay: .3,\r\n    // })\r\n}\r\npointMidAnimation()\r\n\r\nfunction page4Animation() {\r\n\r\n  var tl4e = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page4\",\r\n      scroller: \"body\",\r\n      start: \"top 100%%\",\r\n      end: \"top 63%\",\r\n      scrub: true,\r\n      // markers: true\r\n    }\r\n  })\r\n  tl4e\r\n\r\n    .to(\"#circle2\", {\r\n      top: \"50%\",\r\n      transform: \"translate(-50%,-50%) scale(1)\",\r\n      duration: 2.3,\r\n    }, \"oc\")\r\n    .to(\"#ser1,#ser2,#ser3,#ser4,#ser5,#ser6\", {\r\n      filter: \"blur(0px)\",\r\n      opacity: 1,\r\n      duration: .8,\r\n    }, \"oc\")\r\n    .to(\"#para6\", {\r\n      opacity: 0,\r\n      duration: .8,\r\n    }, \"oc\")\r\n    .to(\"#circle2\", {\r\n      top: \"50%\",\r\n      width: \"0.65vw\",\r\n      height: \"0.65vw\",\r\n      backgroundColor: \"transparent\",\r\n      duration: .6,\r\n    })\r\n\r\n\r\n  const page4WrapperWidth = document.querySelector(\"#project-wrapper\").scrollWidth\r\n  const slideValue = page4WrapperWidth - window.innerWidth\r\n\r\n  var tl4 = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page4\",\r\n      scroller: \"body\",\r\n      start: \"top top\",\r\n      end: \"top -180%\",\r\n      scrub: 1,\r\n      pin: true,\r\n    }\r\n  })\r\n\r\n  tl4\r\n    .to(\"#project-wrapper\", {\r\n      transform: `translateX(-${slideValue}px)`,\r\n      duration: 1.5,\r\n      ease: \"linear\",\r\n    }, \"sl\")\r\n    .to(\"#circle2\", {\r\n      left: \"-670%\",\r\n      duration: 1,\r\n    }, \"sl\")\r\n    .to(\".view-all .cirr\", {\r\n      opacity: 1,\r\n      duration: 0\r\n    }, \"c\")\r\n    .to(\".view-all .cirr\", {\r\n      width: \"2.5vw\",\r\n      height: \"2.5vw\",\r\n      backgroundColor: \"var(--secondary)\",\r\n      duration: .2,\r\n    }, \"s\")\r\n    .to(\".view-all .cirr i\", {\r\n      opacity: 1,\r\n      duration: .1,\r\n      delay: 0.1\r\n    }, \"s\")\r\n    .to(\"#circle2\", {\r\n      left: \"50%\",\r\n      width: \"2.5vw\",\r\n      height: \"2.5vw\",\r\n      backgroundColor: \"var(--secondary)\",\r\n      duration: .5,\r\n    })\r\n    .to(\".view-all\", {\r\n      opacity: 0,\r\n      duration: .2\r\n    })\r\n    .to(\".view-all\", {\r\n      display: \"none\",\r\n      delay: .09\r\n    })\r\n}\r\npage4Animation()\r\n\r\n\r\nfunction page5Animation() {\r\n\r\n  const tl5s = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page5\",\r\n      scroller: \"body\",\r\n      start: \"top 15%\",\r\n      end: \"top 0%\",\r\n      scrub: 1,\r\n      // markers:true\r\n    }\r\n  })\r\n  tl5s\r\n    .to(\"#navbar\", {\r\n      opacity: 0,\r\n      pointerEvent: \"none\",\r\n      duration: .2\r\n    }, \"a\")\r\n    .to(\"#navbar-black\", {\r\n      opacity: 1,\r\n      pointerEvent: \"all\",\r\n      duration: .2\r\n    }, \"a\")\r\n\r\n  const tl5 = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page5\",\r\n      scroller: \"body\",\r\n      start: \"top 0%\",\r\n      end: \"top -400%\",\r\n      scrub: 1,\r\n      pin: true,\r\n    }\r\n  })\r\n  tl5\r\n    .to(\"#page5\", {\r\n      opacity: 1,\r\n      duration: .1\r\n    }, \"c\")\r\n    .to(\"#page5\", {\r\n      maskSize: \"200%\",\r\n      duration: 4,\r\n      delay: -.2\r\n    })\r\n    .to(\"#video-container\", {\r\n      clipPath: \" polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n      duration: 1\r\n    })\r\n    .to(\"#video-container\", {\r\n      transform: \"translate(-50%,-50%) scale(.6) rotateY(-20deg) rotateX(-2deg)\",\r\n      duration: 1.5\r\n    })\r\n    .to(\"#video-container\", {\r\n      transform: \"translate(-50%,-50%) scale(.5) rotateY(-20deg) rotateY(20deg)   rotateX(-2deg) rotateX(2deg)\",\r\n      duration: 1.5\r\n    })\r\n    .to(\"#img-over\", {\r\n      top: \"-300%\",\r\n      duration: 4\r\n    })\r\n    .to(\"#video-container\", {\r\n      transform: \"translate(-50%,-50%) scale(.6) rotateY(-20deg) rotateX(-2deg)\",\r\n      duration: 1.5\r\n    })\r\n    .to(\"#video-container\", {\r\n      transform: \"translate(-50%,-50%)\",\r\n      duration: 1.5\r\n    })\r\n\r\n\r\n}\r\npage5Animation()\r\n\r\nfunction page6Animation() {\r\n  const tl6s = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#page6\",\r\n      scroller: \"body\",\r\n      start: \"top 0%\",\r\n      end: \"top -5%\",\r\n      scrub: 1,\r\n      // markers:true\r\n    }\r\n  })\r\n  tl6s\r\n    .to(\"#navbar-black\", {\r\n      opacity: 0,\r\n      pointerEvent: \"none\",\r\n      duration: .2\r\n    }, \"a\")\r\n    .to(\"#navbar\", {\r\n      opacity: 1,\r\n      pointerEvent: \"all\",\r\n      duration: .2\r\n    }, \"a\")\r\n}\r\npage6Animation()\r\n\r\n\r\nfunction footerAnimation() {\r\n\r\n  const ft = gsap.timeline({\r\n    scrollTrigger: {\r\n      trigger: \"#footer\",\r\n      scroller: \"body\",\r\n      start: \"top 15%\",\r\n      end: \"top 0%\",\r\n      scrub: 1,\r\n      // markers:true\r\n    }\r\n  })\r\n  ft\r\n    .to(\"#navbar\", {\r\n      opacity: 0,\r\n      pointerEvent: \"none\",\r\n      duration: .2\r\n    }, \"a\")\r\n    .to(\"#navbar-black\", {\r\n      opacity: 1,\r\n      duration: .2,\r\n      pointerEvent: \"all\",\r\n    }, \"a\")\r\n}\r\nfooterAnimation()\r\n\r\n\r\n"],"names":["canvas","resizeCanvas","config","pointerPrototype","pointers","splatStack","gl","ext","getWebGLContext","isMobile","params","isWebGL2","halfFloat","supportLinearFiltering","halfFloatTexType","formatRGBA","formatRG","formatR","getSupportedFormat","internalFormat","format","type","supportRenderTextureFormat","texture","fbo","Material","vertexShader","fragmentShaderSource","keywords","hash","i","hashCode","program","fragmentShader","compileShader","createProgram","getUniforms","Program","uniforms","uniformCount","uniformName","source","addKeywords","shader","keywordsString","keyword","baseVertexShader","blurVertexShader","blurShader","copyShader","clearShader","colorShader","checkerboardShader","displayShaderSource","bloomPrefilterShader","bloomBlurShader","bloomFinalShader","sunraysMaskShader","sunraysShader","splatShader","advectionShader","divergenceShader","curlShader","vorticityShader","pressureShader","gradientSubtractShader","blit","target","clear","dye","velocity","divergence","curl","pressure","bloom","bloomFramebuffers","sunrays","sunraysTemp","ditheringTexture","createTextureAsync","blurProgram","copyProgram","clearProgram","bloomPrefilterProgram","bloomBlurProgram","bloomFinalProgram","sunraysMaskProgram","sunraysProgram","splatProgram","advectionProgram","divergenceProgram","curlProgram","vorticityProgram","pressureProgram","gradienSubtractProgram","displayMaterial","initFramebuffers","simRes","getResolution","dyeRes","texType","rgba","rg","r","filtering","createDoubleFBO","resizeDoubleFBO","createFBO","initBloomFramebuffers","initSunraysFramebuffers","res","width","height","w","h","param","texelSizeX","texelSizeY","id","fbo1","fbo2","value","temp","resizeFBO","newFBO","url","obj","image","updateKeywords","displayKeywords","lastUpdateTime","colorUpdateTimer","update","dt","calcDeltaTime","updateColors","applyInputs","step","render","now","scaleByPixelRatio","wrap","p","generateColor","multipleSplats","splatPointer","velocityId","applyBloom","applySunrays","blur","drawDisplay","scale","getTextureScale","destination","last","knee","curve0","curve1","curve2","dest","baseTex","mask","iterations","pointer","dx","dy","splat","amount","color","x","y","correctRadius","radius","aspectRatio","rect","posX","posY","updatePointerMoveData","touches","updatePointerDownData","updatePointerUpData","correctDeltaX","correctDeltaY","delta","c","HSVtoRGB","s","v","g","b","f","q","t","min","max","range","resolution","input","pixelRatio","headerData","changingHeader","index","changeHeader","loader","clutter","l","cursor","elem","e","muted","vid","page2Animation","tl2","tl22","pointMidAnimation","page3","h2","h22","positionFromPage3Top","diff","tlc","tl","page4Animation","tl4e","slideValue","tl4","page5Animation","page6Animation","footerAnimation"],"mappings":"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"}